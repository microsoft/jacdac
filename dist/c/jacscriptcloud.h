// Autogenerated C header file for Jacscript Cloud
#ifndef _JACDAC_SPEC_JACSCRIPT_CLOUD_H
#define _JACDAC_SPEC_JACSCRIPT_CLOUD_H 1

#define JD_SERVICE_CLASS_JACSCRIPT_CLOUD  0x14606e9c

// enum CommandStatus (uint32_t)
#define JD_JACSCRIPT_CLOUD_COMMAND_STATUS_OK 0xc8
#define JD_JACSCRIPT_CLOUD_COMMAND_STATUS_NOT_FOUND 0x194
#define JD_JACSCRIPT_CLOUD_COMMAND_STATUS_BUSY 0x1ad

/**
 * Upload a labelled tuple of values to the cloud.
 * The tuple will be automatically tagged with timestamp and originating device.
 */
#define JD_JACSCRIPT_CLOUD_CMD_UPLOAD 0x80
typedef struct jd_jacscript_cloud_upload {
    char label[0];  // string0
    // uint64_t value[0];  // f64
} jd_jacscript_cloud_upload_t;


/**
 * Argument: path string (bytes). Get a numeric field from the current device twin.
 * Path is dot-separated.
 */
#define JD_JACSCRIPT_CLOUD_CMD_GET_TWIN 0x81

/**
 * Report: 
 */
typedef struct jd_jacscript_cloud_get_twin_report {
    char path[0];  // string0
    // uint64_t value;  // f64
} jd_jacscript_cloud_get_twin_report_t;


/**
 * Should be called by jacscript when it finishes handling a `cloud_command`.
 */
#define JD_JACSCRIPT_CLOUD_CMD_ACK_CLOUD_COMMAND 0x83
typedef struct jd_jacscript_cloud_ack_cloud_command {
    uint32_t seq_no;
    uint32_t status;  // CommandStatus
    uint64_t result[0];  // f64
} jd_jacscript_cloud_ack_cloud_command_t;


/**
 * Read-only bool (uint8_t). Indicate whether we're currently connected to the cloud server.
 * When offline, `upload` commands are queued, and `get_twin` respond with cached values.
 */
#define JD_JACSCRIPT_CLOUD_REG_CONNECTED 0x180

/**
 * Emitted when cloud requests jacscript to run some action.
 */
#define JD_JACSCRIPT_CLOUD_EV_CLOUD_COMMAND 0x81
typedef struct jd_jacscript_cloud_cloud_command {
    uint32_t seq_no;
    char command[0];  // string0
    // uint64_t argument[0];  // f64
} jd_jacscript_cloud_cloud_command_t;


/**
 * Emitted whenever any of the twin properties change.
 */
#define JD_JACSCRIPT_CLOUD_EV_TWIN_CHANGE JD_EV_CHANGE

#endif
