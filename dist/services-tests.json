[{"description":"Base tests","serviceClassIdentifier":536870899,"tests":[]},{"description":"Sensor tests","serviceClassIdentifier":536870898,"tests":[]},{"description":"Button tests","serviceClassIdentifier":343122531,"tests":[{"description":"Press and release","prompt":"Press and release the button (once)","registers":[],"events":["down","up"],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"down"},{"type":"Identifier","name":"up"}]}],"callee":{"type":"Identifier","name":"events"}}}]},{"description":"Hold event","prompt":"Press and hold the button for more than 500ms, then release","registers":[],"events":["down","hold","up"],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"down"},{"type":"Identifier","name":"hold"},{"type":"Identifier","name":"up"}]}],"callee":{"type":"Identifier","name":"events"}}}]},{"description":"Hold for 2 seconds (4 hold events)","prompt":"Press and hold the button for 2 seconds, then release","registers":[],"events":["down","hold","up"],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"down"},{"type":"Identifier","name":"hold"},{"type":"Identifier","name":"hold"},{"type":"Identifier","name":"hold"}]}],"callee":{"type":"Identifier","name":"events"}}},{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"up"},{"type":"LogicalExpression","operator":"&&","left":{"type":"BinaryExpression","operator":">=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"up"},"property":{"type":"Identifier","name":"time"}},"right":{"type":"Literal","value":2000,"raw":"2000"}},"right":{"type":"BinaryExpression","operator":"<","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"up"},"property":{"type":"Identifier","name":"time"}},"right":{"type":"Literal","value":2500,"raw":"2500"}}}],"callee":{"type":"Identifier","name":"nextEvent"}}}]},{"description":"Event timing for hold events","prompt":"Press and hold the button for 2 seconds","registers":[],"events":["hold"],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"hold"},{"type":"BinaryExpression","operator":">=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"hold"},"property":{"type":"Identifier","name":"time"}},"right":{"type":"Literal","value":500,"raw":"500"}}],"callee":{"type":"Identifier","name":"awaitEvent"}}},{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"hold"},{"type":"BinaryExpression","operator":">=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"hold"},"property":{"type":"Identifier","name":"time"}},"right":{"type":"Literal","value":1000,"raw":"1000"}}],"callee":{"type":"Identifier","name":"nextEvent"}}},{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"hold"},{"type":"BinaryExpression","operator":">=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"hold"},"property":{"type":"Identifier","name":"time"}},"right":{"type":"Literal","value":1500,"raw":"1500"}}],"callee":{"type":"Identifier","name":"nextEvent"}}},{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"hold"},{"type":"BinaryExpression","operator":">=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"hold"},"property":{"type":"Identifier","name":"time"}},"right":{"type":"Literal","value":2000,"raw":"2000"}}],"callee":{"type":"Identifier","name":"nextEvent"}}}]}]},{"description":"Humidity tests","serviceClassIdentifier":382210232,"tests":[{"description":"in range","prompt":"Check that thermometer temperature is in expected range","registers":["humidity","max_humidity","humidity_error","min_humidity"],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"BinaryExpression","operator":"<=","left":{"type":"Identifier","name":"humidity"},"right":{"type":"BinaryExpression","operator":"+","left":{"type":"Identifier","name":"max_humidity"},"right":{"type":"Identifier","name":"humidity_error"}}}],"callee":{"type":"Identifier","name":"check"}}},{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"BinaryExpression","operator":"<=","left":{"type":"BinaryExpression","operator":"-","left":{"type":"Identifier","name":"min_humidity"},"right":{"type":"Identifier","name":"humidity_error"}},"right":{"type":"Identifier","name":"humidity"}}],"callee":{"type":"Identifier","name":"check"}}}]},{"description":"increases","prompt":"blow on the sensor","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"humidity"},{"type":"Literal","value":10,"raw":"10"}],"callee":{"type":"Identifier","name":"increasesBy"}}}]},{"description":"decreases","prompt":"let the sensor rest","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"humidity"},{"type":"Literal","value":4,"raw":"4"}],"callee":{"type":"Identifier","name":"decreasesBy"}}}]},{"description":"calibrate","prompt":"measure humidity using a calibrated sensor and check value","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[],"callee":{"type":"Identifier","name":"ask"}}}]}]},{"description":"Rotary encoder tests","serviceClassIdentifier":284830153,"tests":[{"description":"knob turn","prompt":"turn the knob back and forth","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"}],"callee":{"type":"Identifier","name":"changes"}}}]},{"description":"clockwise turn","prompt":"turn the knob clockwise","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"}],"callee":{"type":"Identifier","name":"increases"}}}]},{"description":"counter-clockwise turn","prompt":"turn the knob counter-clockwise","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"}],"callee":{"type":"Identifier","name":"decreases"}}}]},{"description":"one rotation clockwise","prompt":"turn one complete rotation clockwise","registers":["clicks_per_turn"],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"},{"type":"Identifier","name":"clicks_per_turn"}],"callee":{"type":"Identifier","name":"increasesBy"}}}]},{"description":"one rotation counter-clockwise","prompt":"turn one complete rotation counter-clockwise","registers":["clicks_per_turn"],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"},{"type":"Identifier","name":"clicks_per_turn"}],"callee":{"type":"Identifier","name":"decreasesBy"}}}]},{"description":"no missing value clockwise","prompt":"slowly turn clockwise one complete rotation","registers":["position","clicks_per_turn"],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"},{"type":"BinaryExpression","operator":"+","left":{"type":"Identifier","name":"position"},"right":{"type":"Identifier","name":"clicks_per_turn"}}],"callee":{"type":"Identifier","name":"stepsUpTo"}}},{"prompt":"is the knob at the same physical position as when you started turning?","call":{"type":"CallExpression","arguments":[],"callee":{"type":"Identifier","name":"ask"}}}]},{"description":"no missing value counter-clockwise","prompt":"slowly turn counter-clockwise one complete rotation","registers":["position","clicks_per_turn"],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"position"},{"type":"BinaryExpression","operator":"-","left":{"type":"Identifier","name":"position"},"right":{"type":"Identifier","name":"clicks_per_turn"}}],"callee":{"type":"Identifier","name":"stepsDownTo"}}},{"prompt":"is the knob at the same physical position as when you started turning?","call":{"type":"CallExpression","arguments":[],"callee":{"type":"Identifier","name":"ask"}}}]}]},{"description":"Thermometer tests","serviceClassIdentifier":337754823,"tests":[{"description":"in range","prompt":"Check that thermometer temperature is in expected range","registers":["temperature","max_temperature","temperature_error","min_temperature"],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"BinaryExpression","operator":"<=","left":{"type":"Identifier","name":"temperature"},"right":{"type":"BinaryExpression","operator":"+","left":{"type":"Identifier","name":"max_temperature"},"right":{"type":"Identifier","name":"temperature_error"}}}],"callee":{"type":"Identifier","name":"check"}}},{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"BinaryExpression","operator":"<=","left":{"type":"BinaryExpression","operator":"-","left":{"type":"Identifier","name":"min_temperature"},"right":{"type":"Identifier","name":"temperature_error"}},"right":{"type":"Identifier","name":"temperature"}}],"callee":{"type":"Identifier","name":"check"}}}]},{"description":"increase temperature","prompt":"Blow on the sensor to increase the temperature by one degree C","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"temperature"},{"type":"Literal","value":1,"raw":"1.0"}],"callee":{"type":"Identifier","name":"increasesBy"}}}]},{"description":"decrease temperature","prompt":"Let the sensor cool down to decrease the temperature by one degree C","registers":[],"events":[],"testCommands":[{"prompt":"","call":{"type":"CallExpression","arguments":[{"type":"Identifier","name":"temperature"},{"type":"Literal","value":1,"raw":"1.0"}],"callee":{"type":"Identifier","name":"decreasesBy"}}}]}]}]