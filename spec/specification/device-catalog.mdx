---
order: 11
title: Device Catalog Specification
---

import DeviceSpecificationList from "../../../docs/src/components/DeviceSpecificationList"
import RandomGenerator from "../../../docs/src/components/RandomGenerator"

# Device Catalog Specification

The JACDAC project maintains a catalog of known [devices](/devices)
in the https://github.com/microsoft/jacdac repository. 
Any manufacturer of JACDAC device is encouraged to add their devices 
to the catalog following the instructions below.

<DeviceSpecificationList count={8} shuffle={true} />

## Catalog format

The device catalog is stored as Markdown text files and JPEG images, organized under the [jacdac devices](https://github.com/microsoft/jacdac/tree/main/devices) folder.
Each company may create a new folder for their devices (or multiple folders for product families).

### Specification format

A device specification is authored in a markdown format 

* example: [accelerometer](https://github.com/microsoft/jacdac/blob/main/devices/microsoft-jm/acc.md)

You can start from this template:

```
# NAME

DESCRIPTION

* services: SERVICE_CLASS*
* firmware: FIRMARE_ID*
* repo: REPO_URL
* link: HOME_URL
```

where 
* ``NAME`` is the name of the device
* ``DESCRIPTION`` is a short 1 sentence description
* ``SERVICE_CLASS*`` is a comma separated list of service class supported by this device (``0x...``)
* ``FIRMWARE_ID*`` are the unique firmware identifers for the device. Sometimes there can be more than one for different hardware
   revisions. The JACDAC tool will detect duplicates.
* ``REPO_URL`` is the URL to the GitHub repository hosting the firmware binaries.
* ``HOME_URL`` is the device store/home page for users

<RandomGenerator firmware={true} />

### Common file ``_default.md``

The special file ``_default.md`` will be appended to all other markdown file in the folder. This is a useful file to add common information
such as repository url or link url.

* example: [_default.md](https://github.com/microsoft/jacdac/blob/main/devices/microsoft-jm/_default.md)

```
* repo: REPO_URL
* link: HOME_URL
```

### Image

Each device file, (e.g. ``mydevice.md``), should be accompanied by a JPEG picture of the device, (e.g. ``mydevice.jpg``).
* 4:3 aspect ratio
* 600 pixels wide
* White background, picture from the top

* example: [microsoft-jm](https://github.com/microsoft/jacdac/tree/main/devices/microsoft-jm)

## Firmware updates

Firmware updates can be hosted as **assets** on **releases** of GitHub repositories.
Upon detecting a device with the specified firmware identifier, 
JACDAC will automatically query the device catalog for the firmware repository, and download the latest firmware.

* example [jacdac-stm32x0 releases](https://github.com/microsoft/jacdac-stm32x0/releases)

The procedure runs as follows:
* detect device on the bus
* query firmware identifier register in the control service
* identify device in device catalog
* query latest release from GitHub in the listed repository (using [semver](https://semver.org/)), download the **firmware.uf2** asset
* compare firmware version on device to latest firmware and notify user of available device

### Building your firmware

You can concatenate all your built firmwares into a single **.uf2** file, which should be named ``firmware.uf2`` when uploaded to an asset.